{% extends 'base.html' %}
{% load common_tags %}
{% load settings_tags %}
{% load static %}

{% block title %}{{ title }}{% endblock %}

{% block head %}
<link rel="stylesheet" href="{% static 'core/css/base.css' %}">
{% block deps %}
{% endblock %}
{% endblock %}

{% block body %}
<!--ul class="sidenav" id="slide-out">
    {% settings_value "NAVBAR" as navbar %}
    {% for heading, items in navbar.items %}
    {% if items|gettype == 'str' %}
    <li >
        <a href="{{ items }}" class="sidenav-close">{{ heading }}</a>
    </li>
    {% elif items|gettype == 'dict' %}
    <li class="divider"></li>
    <li>
        {% for item, path in items.items %}
            <li>
                <a href="#!">{{ item }}</a>
            </li>
        {% endfor %}
    </li>
    {% else %}
    {{ items|gettype }}
    {% endif %}
    {% endfor %}
    <li class="divider"></li>
    {% if request.user.is_authenticated %}
    <li><a href="{% url 'profile_redirect' %}" class="sidenav-close">Profile</a></li>
    <li><a class="link" href="{% url 'timetable_list' %}">Timetable</a></li>
    {% if user.is_staff %}
    <li><a href="{% url 'admin:index' %}" class="sidenav-close">Admin</a></li>
    {% endif %}
    <li class="divider"></li>
    <li><a href="{% url 'account_logout' %}" class="sidenav-close">Logout</a></li>
    {% else %}
    <li><a href="{% url 'account_login' %}?next={{ request.get_full_path }}" class="sidenav-close">Login</a></li>
    <li><a href="{% url 'account_signup' %}?next={{ request.get_full_path }}" class="sidenav-close">Sign Up</a></li>
    {% endif %}
</ul-->
<nav class="navbar navbar-expand-lg navbar-dark">
    <a class="navbar-brand" href="{% url 'index' %}">
        <img class="d-inline-block align-top" src="{% static 'core/img/logo-dark-transparent.png' %}"></img>
        <!--Metropolis-->
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="justify-content-end collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav">
            {% settings_value "NAVBAR" as navbar %}
            {% for heading, items in navbar.items %}
            {% if items|gettype == 'str' %}
            <li class="nav-item">
                <a class="nav-link" href="{{ items }}">{{ heading }}</a>
            </li>
            {% elif items|gettype == 'dict' %}
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#!" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    {{ heading }}
                </a>
                <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                    {% for item, path in items.items %}
                    <a class="dropdown-item" href="#!">{{ item }}</a>
                    {% endfor %}
                </div>
            </li>
            {% else %}
            {{ items|gettype }}
            {% endif %}
            {% endfor %}
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenu" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    {% if request.user.is_authenticated %}
                    Account
                    {% else %}
                    Login/Sign Up
                    {% endif %}
                </a>
                <div class="dropdown-menu" aria-labelledby="navbarDropdownMenu">
                    {% if request.user.is_authenticated %}
                    <a class="dropdown-item" href="{% url 'profile_redirect' %}">Profile</a>
                    <a class="dropdown-item" href="{% url 'timetable_list' %}">Timetable</a>
                    {% if user.is_staff %}
                    <a class="dropdown-item" href="{% url 'admin:index' %}">Admin</a>
                    {% endif %}
                    <a class="dropdown-item" href="{% url 'account_logout' %}">Logout</a>
                    {% else %}
                    <a class="dropdown-item" href="{% url 'account_login' %}?next={{ request.get_full_path }}">Login</a>
                    <a class="dropdown-item" href="{% url 'account_signup' %}?next={{ request.get_full_path }}">Sign Up</a>
                    {% endif %}
                </div>
            </li>
        </ul>
    </div>
            
        <!--a href="#" data-target="slide-out" class="sidenav-trigger"><i class="zmdi zmdi-menu"></i></a>
        <ul class="right hide-on-med-and-down">
            {% settings_value "NAVBAR" as navbar %}
            {% for heading, items in navbar.items %}
            {% if items|gettype == 'str' %}
            <li class="nav-item">
                <a class="nav-link" href="{{ items }}">{{ heading }}</a>
            </li>
            {% elif items|gettype == 'dict' %}
            <li>
                <a class="dropdown-trigger" href="#!" data-target="dropdown1">{{ heading }}<i class="zmdi zmdi-caret-down"></i></a>
                <ul id="dropdown1" class="dropdown-content">
                    {% for item, path in items.items %}
                        <li>
                            <a href="#!">{{ item }}</a>
                        </li>
                    {% endfor %}
                </ul>
            </li>
            {% else %}
            {{ items|gettype }}
            {% endif %}
            {% endfor %}
            <li><a class="dropdown-trigger" href="#!" data-target="dropdownAcc">
                {% if request.user.is_authenticated %}
                Account
                {% else %}
                Login/Sign Up
                {% endif %}
                <i class="zmdi zmdi-caret-down"></i>
            </a></li>
            <script>
                $(document).ready(function(){
                    $('.dropdown-trigger').dropdown();
                    $('.sidenav').sidenav();
                });
            </script>
        </ul>
    </div-->
</nav>
<a id="back" onclick="goBack()">
    <i class="zmdi zmdi-arrow-left"></i>
</a>
<script>
    function goBack() {
        window.history.back();
    }
</script>
{% block main %}
{% endblock %}

<div class="footer">
    <div class="footer-title-par">
        <p class="footer-title">William Lyon Mackenzie's online hub for announcements, calendar events, clubs, and timetables.</p>
    </div>
    <hr class="footer-bar">
    <div class="foooter-icon-par">
        <a class="footer-name" href="https://github.com/wlmac/metropolis" rel="noreferrer" target="_blank">
            <i class="footer-icon zmdi zmdi-hc-3x zmdi-github"></i>
        </a>
    </div>
</div>

{% endblock %}


